<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Appreciation Letter — UKSS</title>

<style>
  :root{
    --ukss-green: #265a2f;
    --soft-green: #e6f4e6;
    --text: #0b2b18;
    --accent: #6fbf73;
  }

  body{
    margin:0;
    font-family:"Georgia", serif;
    background:#f6fff6;
    padding:25px;
    color:var(--text);
  }

  .container{
    max-width:920px;
    margin:0 auto;
    background:white;
    border-radius:14px;
    border:10px solid var(--ukss-green);
    box-shadow:0 0 35px rgba(0,0,0,0.15);
    padding:0;
    position:relative;
    overflow:hidden;
  }

  /* Watermark */
  .watermark{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    opacity:0.07;
    width:450px;
    height:450px;
    background:url('https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png') center/contain no-repeat;
    z-index:0;
    pointer-events:none;
  }

  /* Flowers decoration */
  .corner-decoration{
    position:absolute;
    width:130px;
    height:130px;
    background-image:url('flowers.png');
    background-size:contain;
    background-repeat:no-repeat;
    opacity:0.13;
  }
  .corner-top-left{ top:10px; left:10px; }
  .corner-top-right{ top:10px; right:10px; transform:scaleX(-1); }
  .corner-bottom-left{ bottom:10px; left:10px; transform:rotate(-6deg); }
  .corner-bottom-right{ bottom:10px; right:10px; transform:scaleX(-1); }

  /* HEADER */
  .letter-header{
    padding:18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:4px double var(--ukss-green);
    background:var(--soft-green);
  }

  .logo-wrap{
    width:120px;
    height:120px;
  }
  .logo-wrap img{
    width:100%;
    height:100%;
    object-fit:contain;
  }

  .header-center{
    text-align:center;
    flex:1;
  }
  .header-center h2{
    margin:0;
    font-size:24px;
    font-weight:800;
    color:var(--ukss-green);
  }

  /* TITLE */
  .title-block{
    text-align:center;
    padding:30px 20px;
  }
  .title-block h1{
    margin-bottom:8px;
    font-size:32px;
    color:var(--ukss-green);
  }

  /* BODY */
  .letter-body{
    padding:30px 40px;
    font-size:18px;
    line-height:1.7;
    position:relative;
    z-index:2;
  }

  .info-table{
    width:100%;
    margin-top:28px;
    border-collapse:collapse;
  }
  .info-table td{
    padding:8px 6px;
    font-size:17px;
  }
  .label{
    font-weight:700;
    width:200px;
    color:#355943;
  }

  /* signature */
  .signature{
    margin-top:45px;
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
  }
  .sign-col{text-align:left;}

  .signature-img{
    width:210px;
    height:90px;
  }
  .signature-img img{
    width:100%;
    height:100%;
    object-fit:contain;
  }

  .actions{
    padding:18px;
    text-align:right;
    border-top:4px double var(--soft-green);
    background:#f8fff8;
  }
  .btn{
    padding:10px 14px;
    font-weight:bold;
    border-radius:7px;
    cursor:pointer;
    margin-left:10px;
  }
  .btn-print{ background:var(--ukss-green); color:white; border:none; }
  .btn-download{ background:var(--accent); color:white; border:none; }
  .btn-back{ background:white; border:2px solid var(--ukss-green); color:var(--ukss-green); }

  @media print{
    .actions{ display:none; }
    body{ padding:0; background:white; }
    .container{ border:none; }
  }
</style>
</head>

<body>

<div class="container">

  <div class="watermark"></div>

  <div class="corner-decoration corner-top-left"></div>
  <div class="corner-decoration corner-top-right"></div>
  <div class="corner-decoration corner-bottom-left"></div>
  <div class="corner-decoration corner-bottom-right"></div>

  <div class="letter-header">
    <div class="logo-wrap">
      <img src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png" />
    </div>

    <div class="header-center">
      <h2>UMOJA KING'ORI SECONDARY SCHOOL</h2>
      <p style="font-size:13px;color:#345840;">Official Appreciation Letter — Student Leadership</p>
    </div>

    <div class="logo-wrap">
      <img src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png" />
    </div>
  </div>

  <div class="title-block">
    <h1>CERTIFICATE OF APPRECIATION</h1>
    <h3 style="color:#4d6e55;font-style:italic;">Presented to an Outstanding Student Leader</h3>
  </div>

  <div class="letter-body">

    <p id="contentParagraph"></p>

    <table class="info-table">
      <tr><td class="label">Student Name:</td><td id="studentName"></td></tr>
      <tr><td class="label">Position:</td><td id="positionName"></td></tr>
      <tr><td class="label">Class:</td><td id="studentClass"></td></tr>
      <tr><td class="label">Gender:</td><td id="studentGender"></td></tr>
      <tr><td class="label">Votes Received:</td><td id="votesCount"></td></tr>
      <tr><td class="label">Certificate Serial:</td><td id="serialNumber"></td></tr>
      <tr><td class="label">Election Year:</td><td id="yearLabel"></td></tr>
    </table>

    <div class="signature">

      <div class="sign-col">
        <div class="signature-img">
          <img src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/hm_sign.jpeg" />
        </div>
        <div style="color:#355943;font-size:15px;">
          <b>Headmaster</b><br>
          Umoja King'ori Secondary School
        </div>
      </div>

      <div style="text-align:right;">
        <div style="font-size:14px;color:#355943;">Date:</div>
        <div id="todayDate" style="font-size:18px;font-weight:700;"></div>
      </div>

    </div>

  </div>

  <div class="actions">
    <button class="btn btn-back" onclick="history.back()">← Back</button>
    <button class="btn btn-download" onclick="window.print()">Download PDF</button>
    <button class="btn btn-print" onclick="window.print()">Print</button>
  </div>

</div>

<script>
  const SHORT_CODES = {
    "head": "HP",
    "headPrefect": "HP",
    "generalSecretary": "GS",
    "sports": "SP",
    "sportsBoy": "SP",
    "sportsGirl": "SP",
    "food": "FP",
    "foodBoy": "FP",
    "foodGirl": "FP",
    "environment": "EP",
    "health": "HPF",
    "maintenance": "MP",
    "store": "STP",
    "academic": "AP",
    "discipline": "DP"
  };

  function humanPosition(pos){
    if(!pos) return "";
    const base = pos.replace(/Boy|Girl/i,"");
    return (
      base.charAt(0).toUpperCase() +
      base.slice(1)
    ) + " Prefect";
  }

  function getParams(){
    const p = new URLSearchParams(window.location.search);
    return {
      name: p.get("name") || "",
      position: p.get("position") || "",
      votes: p.get("votes") || "",
      class: p.get("class") || "",
      gender: p.get("gender") || "",
      serial: p.get("serial") || "0012",
      year: p.get("year") || new Date().getFullYear()
    };
  }

  function fill(){
    const p = getParams();
    const cleanPos = humanPosition(p.position);
    const short = SHORT_CODES[p.position] || "XX";

    document.getElementById("studentName").textContent = p.name;
    document.getElementById("positionName").textContent = cleanPos;
    document.getElementById("votesCount").textContent = p.votes;
    document.getElementById("studentClass").textContent = p.class;
    document.getElementById("studentGender").textContent = p.gender;
    document.getElementById("yearLabel").textContent = p.year;
    document.getElementById("todayDate").textContent =
      new Date().toLocaleDateString();

    document.getElementById("serialNumber").textContent =
      `UKSS-${p.year}-${short}-${p.serial}`;

    document.getElementById("contentParagraph").innerHTML =
      `This certificate is proudly presented to <strong>${p.name}</strong>
       in recognition of outstanding service as the <strong>${cleanPos}</strong>.
       Receiving <strong>${p.votes}</strong> votes in the ${p.year} elections,
       your dedication, discipline and leadership are highly appreciated.`;
  }

  fill();
</script>

</body>
</html>
