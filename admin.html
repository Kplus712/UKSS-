<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Certificate of Appreciation — UKSS</title>

<style>
:root{
  --green: #265a2f;
  --gold: #c5a106;
  --text: #05320f;
}

body{
  margin:0;
  padding:25px;
  background:#f6fff6;
  font-family:"Georgia", serif;
}

.container{
  width:900px;
  margin:auto;
  background:white;
  border:12px solid var(--gold);
  border-radius:12px;
  padding:20px;
  position:relative;
  overflow:hidden;
}

/* Watermark */
.watermark{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  opacity:0.18;
  width:70%;
  z-index:0;
}

/* Header */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:3px double var(--green);
  padding-bottom:10px;
  margin-bottom:15px;
  position:relative;
  z-index:5;
}

.logo{
  width:120px;
  height:120px;
}

.header-center{
  text-align:center;
  flex:1;
}

.header-center h2{
  color:var(--green);
  margin:0;
  font-size:24px;
  letter-spacing:1px;
}

/* Title */
.title{
  text-align:center;
  margin:20px 0;
  position:relative;
  z-index:5;
}
.title h1{
  margin:0;
  font-size:32px;
  color:var(--green);
  font-weight:700;
}

/* Body text */
.body{
  font-size:18px;
  line-height:1.7;
  padding:10px 30px;
  position:relative;
  z-index:5;
}

/* Info table */
.info-table{
  width:100%;
  margin-top:15px;
  border-collapse:collapse;
}
.info-table td{
  padding:7px 4px;
  font-size:17px;
}
.label{
  font-weight:700;
  color:#2b5530;
  width:200px;
}

/* Signature block */
.signature-block{
  display:flex;
  justify-content:space-between;
  margin-top:40px;
  padding:0 30px;
}

.sign-img{
  width:200px;
  height:90px;
}

.actions{
  text-align:right;
  margin-top:20px;
}
.btn{
  padding:10px 14px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}
.print-btn{ background:var(--green); color:white; }
.download-btn{ background:var(--gold); color:white; }

@media print{
  .actions{ display:none; }
  body{ padding:0; background:white; }
  .container{ margin:0; border:none; }
}
</style>
</head>

<body>

<div class="container">

  <!-- Watermark -->
  <img class="watermark" src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png">

  <!-- Header -->
  <div class="header">
    <img class="logo" src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png">
    <div class="header-center">
      <h2>UMOJA KING'ORI SECONDARY SCHOOL</h2>
      <div style="color:#355b3a; font-size:14px;">Official Student Leadership Appreciation Certificate</div>
    </div>
    <img class="logo" src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/school_log.png">
  </div>

  <!-- Title -->
  <div class="title">
    <h1>CERTIFICATE OF APPRECIATION</h1>
  </div>

  <!-- Body -->
  <div class="body">
    <p id="contentParagraph"></p>

    <table class="info-table">
      <tr><td class="label">Student Name:</td><td id="studentName"></td></tr>
      <tr><td class="label">Position:</td><td id="positionName"></td></tr>
      <tr><td class="label">Class:</td><td id="studentClass"></td></tr>
      <tr><td class="label">Gender:</td><td id="studentGender"></td></tr>
      <tr><td class="label">Votes Received:</td><td id="votesCount"></td></tr>
      <tr><td class="label">Certificate Serial:</td><td id="serialNumber"></td></tr>
      <tr><td class="label">Election Year:</td><td id="yearLabel"></td></tr>
    </table>

    <!-- Signature block -->
    <div class="signature-block">
      <div>
        <img class="sign-img" src="https://raw.githubusercontent.com/Kplus712/UKSS-/main/hm_sign.jpeg">
        <div style="font-size:14px; color:#2d4d2b; margin-top:-6px;">
          <b>Headmaster</b><br>
          Umoja King'ori Secondary School
        </div>
      </div>

      <div style="text-align:right;">
        <div>Date:</div>
        <div id="todayDate" style="font-weight:bold; font-size:18px;"></div>
      </div>
    </div>

  </div>

  <!-- Buttons -->
  <div class="actions">
    <button class="btn print-btn" onclick="window.print()">Print</button>
    <button class="btn download-btn" onclick="window.print()">Download PDF</button>
  </div>

</div>

<script>
// POSITION CODES
const POS_CODES = {
  "headboy": "HB",
  "headgirl": "HG",
  "academic": "AP",
  "generalsecretary": "GS",
  "discipline": "DP",
  "sports": "SG",
  "environmental": "EP",
  "food": "FP",
  "storekeeper": "SK",
  "health": "HP",
  "maintenance": "MP"
};

// Normalize position name → Prefect
function formatPosition(pos){
  let p = pos.toLowerCase().trim();
  if(p.includes("headboy")) return "Head Boy";
  if(p.includes("headgirl")) return "Head Girl";
  if(p.includes("generalsec")) return "General Secretary";

  // Others become "____ Prefect"
  return p.charAt(0).toUpperCase() + p.slice(1) + " Prefect";
}

function getParams(){
  const p = new URLSearchParams(window.location.search);
  return {
    name: p.get("name") || "",
    position: p.get("position") || "",
    votes: p.get("votes") || "",
    class: p.get("candidateClass") || "",
    gender: p.get("candidateGender") || "",
    year: p.get("year") || new Date().getFullYear()
  };
}

function fillPage(){
  const p = getParams();

  const formattedPos = formatPosition(p.position);

  document.getElementById("studentName").textContent = p.name;
  document.getElementById("positionName").textContent = formattedPos;
  document.getElementById("votesCount").textContent = p.votes;
  document.getElementById("studentClass").textContent = p.class;
  document.getElementById("studentGender").textContent = p.gender;
  document.getElementById("yearLabel").textContent = p.year;
  document.getElementById("todayDate").textContent = new Date().toLocaleDateString();

  // Build serial
  const codeKey = p.position.toLowerCase().replace(/\s+/g,'');
  const code = POS_CODES[codeKey] || "XX";
  const serial = `UKSS/${p.year}/${code}/${String(Math.floor(Math.random()*9999)).padStart(4,'0')}`;
  document.getElementById("serialNumber").textContent = serial;

  // Paragraph
  document.getElementById("contentParagraph").innerHTML =
    `This certificate is proudly awarded to <strong>${p.name}</strong> for demonstrating outstanding 
     leadership, discipline, and integrity while serving as the <strong>${formattedPos}</strong> 
     during the ${p.year} UKSS elections. Your dedication and exemplary conduct are highly appreciated.`;
}

fillPage();
</script>

</body>
</html>
