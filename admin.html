<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UMOJA KING'ORI VOTING SYSTEM</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="site-header">
  <h1>üó≥Ô∏è UMOJA KING'ORI VOTING SYSTEM</h1>
  <p class="lead">Vote fairly ‚Äî Your voice counts.</p>
</header>

<main class="container">
  <!-- LOGIN -->
  <section id="loginSection" class="card">
    <h2>Voter Details</h2>
    <div class="row">
      <input id="firstName" placeholder="First name" />
      <input id="middleName" placeholder="Middle name (optional)" />
      <input id="lastName" placeholder="Last name" />
    </div>

    <div class="row">
      <select id="classSelect">
        <option value="">Select class</option>
        <option>Form 1</option>
        <option>Form 2</option>
        <option>Form 3</option>
        <option>Form 4</option>
      </select>

      <select id="genderSelect">
        <option value="">Select gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </div>

    <div class="row">
      <button onclick="startVoting()">Proceed to Voting</button>
    </div>
    <p class="note">You will be prevented from voting twice (system tracks by your full name + class).</p>
  </section>

  <!-- VOTING -->
  <section id="votingSection" class="card" style="display:none;">
    <h2>Vote for Leaders</h2>

    <!-- HEAD BOY (male) & HEAD GIRL (female) landscape -->
    <div class="position-row">
      <div class="position-card">
        <h3>Head Boy (choose 1)</h3>
        <div id="headBoyList" class="candidates-landscape left-column"></div>
      </div>

      <div class="position-card">
        <h3>Head Girl (choose 1)</h3>
        <div id="headGirlList" class="candidates-landscape right-column"></div>
      </div>
    </div>

    <!-- General Secretary -->
    <div class="position-card fullwidth">
      <h3>General Secretary (choose 1)</h3>
      <div id="generalSecretaryList" class="candidates-row"></div>
    </div>

    <!-- Other positions (5) -->
    <div class="position-card fullwidth">
      <h3>Other Leadership Positions (choose 1 per position)</h3>
      <div id="otherPositionsArea"></div>
    </div>

    <div class="row">
      <button onclick="submitVote()">Submit Vote</button>
      <button onclick="cancelVoting()" class="muted">Cancel</button>
    </div>

    <div id="voteMessage" class="info"></div>
  </section>

  <!-- small admin login button -->
  <div style="text-align:center; margin-top:18px;">
    <button class="admin-btn" onclick="adminLogin()">üîê Admin Login</button>
  </div>

</main>

<!-- Firebase SDK (module) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
  import { getDatabase, ref, push, set, onValue, get, child } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";

  // TODO: If you want to change project, replace config below
  const firebaseConfig = {
    apiKey: "AIzaSyAIabK86PrfHfzNVciI2K7aRjb8VoWyA7A",
    authDomain: "ukss-voting-system.firebaseapp.com",
    databaseURL: "https://ukss-voting-system-default-rtdb.firebaseio.com",
    projectId: "ukss-voting-system",
    storageBucket: "ukss-voting-system.firebasestorage.app",
    messagingSenderId: "525528255065",
    appId: "1:525528255065:web:97c4e55d2984acc718bf48",
    measurementId: "G-14ZV9E3X7C"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // export commonly used functions/refs to global so script.js can access
  window.firebaseDB = db;
  window.fbRef = ref;
  window.fbPush = push;
  window.fbSet = set;
  window.fbOnValue = onValue;
  window.fbGet = get;
  window.fbChild = child;
</script>

<script src="script.js"></script>
</body>
</html>
